{% extends 'page.html.twig' %}

{% block title %}Edit Agence{% endblock %}

{% block body %}
<div class="container  mt-4 p-4">
    <h4>Edition de l'Agence</h4>
        {# show flash error  #}
    {% for label, messages in app.flashes %}
        <div class="alert alert-danger">
            {% for message in messages %}
                {{ message }}
            {% endfor %}
        </div>
    {% endfor %}
    {# {{agence.visuel}} #}
    {# btn back #}
    <a href="{{ path('app_agence_index') }}" class="btn btn-primary btn-sm mb-2">Retour</a>
        {{ include('agence/_delete_form.html.twig') }}
    {# form #}

           {# btn post method to set active or not #}
    <form method="post" action="{{ path('app_agence_active', {'id': agence.id}) }}" style="display: inline-block">
        <input type="hidden" name="_method" value="POST">
        <input type="hidden" name="_token" value="{{ csrf_token('active' ~ agence.id) }}">
        {% if agence.active == 1 %}
            <button class="btn btn-success btn-sm mb-2" type="submit">Activer</button>
        {% else %}
            <button class="btn btn-danger btn-sm mb-2" type="submit">Désactiver</button>
        {% endif %}
    </form>


    {{ include('agence/_form.html.twig', {'button_label': 'Mettre à jour'}) }}
    {# btn delete #}


</div>
<script>


document.addEventListener("DOMContentLoaded", function(event) {



let fileUploaded = "/upload/{{agence.visuel}}";





var input = document.querySelector('input[type="file"]');


// set value of input file with current image
//input.value = fileUploaded;





// prefill input file with current image


if (fileUploaded !== "/upload/") {
    // create thumbnail of current image
    var img = document.createElement("img");
    img.src = fileUploaded;
    img.width = 100;
    img.height = 100;
    img.style.margin = "10px";
    img.style.border = "1px solid #ccc";
    img.style.borderRadius = "5px";
    img.style.display = "inline-block";
    img.style.verticalAlign = "middle";
    img.style.objectFit = "cover";
    img.style.objectPosition = "center";

    // append thumbnail to div before input file
    input.parentNode.insertBefore(img, input);



}



});



</script>
{% endblock %}
